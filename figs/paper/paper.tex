\documentclass[10pt,a4paper,onecolumn]{article}
\usepackage{marginnote}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{authblk,etoolbox}
\usepackage{titlesec}
\usepackage{calc}
\usepackage{tikz}
\usepackage{hyperref}
\hypersetup{colorlinks,breaklinks,
            urlcolor=[rgb]{0.0, 0.5, 1.0},
            linkcolor=[rgb]{0.0, 0.5, 1.0}}
\usepackage{caption}
\usepackage{tcolorbox}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{seqsplit}
\usepackage{fixltx2e} % provides \textsubscript
\usepackage[
  backend=biber,
%  style=alphabetic,
%  citestyle=numeric
]{biblatex}
\bibliography{paper.bib}


% --- Page layout -------------------------------------------------------------
\usepackage[top=3.5cm, bottom=3cm, right=1.5cm, left=1.0cm,
            headheight=2.2cm, reversemp, includemp, marginparwidth=4.5cm]{geometry}

% --- Default font ------------------------------------------------------------
% \renewcommand\familydefault{\sfdefault}

% --- Style -------------------------------------------------------------------
\renewcommand{\bibfont}{\small \sffamily}
\renewcommand{\captionfont}{\small\sffamily}
\renewcommand{\captionlabelfont}{\bfseries}

% --- Section/SubSection/SubSubSection ----------------------------------------
\titleformat{\section}
  {\normalfont\sffamily\Large\bfseries}
  {}{0pt}{}
\titleformat{\subsection}
  {\normalfont\sffamily\large\bfseries}
  {}{0pt}{}
\titleformat{\subsubsection}
  {\normalfont\sffamily\bfseries}
  {}{0pt}{}
\titleformat*{\paragraph}
  {\sffamily\normalsize}


% --- Header / Footer ---------------------------------------------------------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
%\renewcommand{\headrulewidth}{0.50pt}
\renewcommand{\headrulewidth}{0pt}
\fancyhead[L]{\hspace{-0.75cm}\includegraphics[width=5.5cm]{/Library/Frameworks/R.framework/Versions/4.1/Resources/library/rticles/rmarkdown/templates/joss/resources/JOSS-logo.png}}
\fancyhead[C]{}
\fancyhead[R]{}
\renewcommand{\footrulewidth}{0.25pt}

\fancyfoot[L]{\footnotesize{\sffamily Couch et. al., (2021). infer: An R
package for tidyverse-friendly statistical
inference. \textit{Journal of Open Source Software}, (), . \href{https://doi.org/}{https://doi.org/}}}


\fancyfoot[R]{\sffamily \thepage}
\makeatletter
\let\ps@plain\ps@fancy
\fancyheadoffset[L]{4.5cm}
\fancyfootoffset[L]{4.5cm}

% --- Macros ---------

\definecolor{linky}{rgb}{0.0, 0.5, 1.0}

\newtcolorbox{repobox}
   {colback=red, colframe=red!75!black,
     boxrule=0.5pt, arc=2pt, left=6pt, right=6pt, top=3pt, bottom=3pt}

\newcommand{\ExternalLink}{%
   \tikz[x=1.2ex, y=1.2ex, baseline=-0.05ex]{%
       \begin{scope}[x=1ex, y=1ex]
           \clip (-0.1,-0.1)
               --++ (-0, 1.2)
               --++ (0.6, 0)
               --++ (0, -0.6)
               --++ (0.6, 0)
               --++ (0, -1);
           \path[draw,
               line width = 0.5,
               rounded corners=0.5]
               (0,0) rectangle (1,1);
       \end{scope}
       \path[draw, line width = 0.5] (0.5, 0.5)
           -- (1, 1);
       \path[draw, line width = 0.5] (0.6, 1)
           -- (1, 1) -- (1, 0.6);
       }
   }

% --- Title / Authors ---------------------------------------------------------
% patch \maketitle so that it doesn't center
\patchcmd{\@maketitle}{center}{flushleft}{}{}
\patchcmd{\@maketitle}{center}{flushleft}{}{}
% patch \maketitle so that the font size for the title is normal
\patchcmd{\@maketitle}{\LARGE}{\LARGE\sffamily}{}{}
% patch the patch by authblk so that the author block is flush left
\def\maketitle{{%
  \renewenvironment{tabular}[2][]
    {\begin{flushleft}}
    {\end{flushleft}}
  \AB@maketitle}}
\makeatletter
\renewcommand\AB@affilsepx{ \protect\Affilfont}
%\renewcommand\AB@affilnote[1]{{\bfseries #1}\hspace{2pt}}
\renewcommand\AB@affilnote[1]{{\bfseries #1}\hspace{3pt}}
\makeatother
\renewcommand\Authfont{\sffamily\bfseries}
\renewcommand\Affilfont{\sffamily\small\mdseries}
\setlength{\affilsep}{1em}


\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}

\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}

\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}

\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={infer: An R package for tidyverse-friendly statistical inference},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% Pandoc citation processing
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
% for Pandoc 2.8 to 2.10.1
\newenvironment{cslreferences}%
  {}%
  {\par}
% For Pandoc 2.11+
\newenvironment{CSLReferences}[3] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc} % for calculating minipage widths
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\newenvironment{cols}[1][]{}{}

\newenvironment{col}[1]{\begin{minipage}{#1}\ignorespaces}{%
\end{minipage}
\ifhmode\unskip\fi
\aftergroup\useignorespacesandallpars}

\def\useignorespacesandallpars#1\ignorespaces\fi{%
#1\fi\ignorespacesandallpars}

\makeatletter
\def\ignorespacesandallpars{%
  \@ifnextchar\par
    {\expandafter\ignorespacesandallpars\@gobble}%
    {}%
}
\makeatother

\title{infer: An R package for tidyverse-friendly statistical inference}

        \author[1, 2]{Simon P. Couch}
          \author[3]{Andrew P. Bray}
          \author[4]{Chester Ismay}
          \author[5]{Evgeni Chasnovski}
          \author[6]{Benjamin S. Baumer}
          \author[2, 7]{Mine Ã‡etinkaya-Rundel}
    
      \affil[1]{Johns Hopkins, Department of Biostatistics}
      \affil[2]{RStudio}
      \affil[3]{UC Berkeley, Department of Statistics and Reed College
Mathematics Department (on leave)}
      \affil[4]{Flatiron School}
      \affil[5]{No Affiliation}
      \affil[6]{Smith College, Program in Statistical \& Data Sciences}
      \affil[7]{Duke University, Department of Statistical Science}
  \date{\vspace{-5ex}}

\begin{document}
\maketitle

\marginpar{
  %\hrule
  \sffamily\small

  {\bfseries DOI:} \href{https://doi.org/}{\color{linky}{}}

  \vspace{2mm}

  {\bfseries Software}
  \begin{itemize}
    \setlength\itemsep{0em}
    \item \href{}{\color{linky}{Review}} \ExternalLink
    \item \href{}{\color{linky}{Repository}} \ExternalLink
    \item \href{}{\color{linky}{Archive}} \ExternalLink
  \end{itemize}

  \vspace{2mm}

  {\bfseries Submitted:} \\
  {\bfseries Published:} 

  \vspace{2mm}
  {\bfseries License}\\
  Authors of papers retain copyright and release the work under a Creative Commons Attribution 4.0 International License (\href{http://creativecommons.org/licenses/by/4.0/}{\color{linky}{CC-BY}}).
}

\hypertarget{summary}{%
\section{Summary}\label{summary}}

\texttt{infer} implements an expressive grammar to perform statistical
inference that adheres to the \texttt{tidyverse} design framework
(Wickham et al., 2019). Rather than providing methods for specific
statistical tests, this package consolidates the principles that are
shared among common hypothesis tests and confidence intervals into a set
of four main verbs (functions), supplemented with many utilities to
visualize and extract value from their outputs.

\hypertarget{statement-of-need}{%
\section{Statement of Need}\label{statement-of-need}}

Packages implementing methods for basic statistical inference in R are
highly variable in their interfaces. The structure of inputted data,
argument names, expected argument types, argument orders, output types,
and spelling cases varies widely both within and among packages. This
diversity in approaches obscures the intuition shared among common
inferential procedures, makes details of usage difficult to remember,
and prevents an expressive and idiomatic coding style.

\texttt{infer} is an R package for randomization-based hypothesis
testing, naturalizing an intuitive understanding of statistical
inference via a unified and expressive grammar. Four functions provide
functionality encompassing a large swath of basic frequentist
statistical inference, abstracting away details of specific tests and
shifting the focus of the analyst to the observed data and the processes
that generated it. Such a grammar lends itself to applications in
teaching, data pedagogy research, applied scientific research, and
advanced predictive modeling. For one, the principled approach of the
\texttt{infer} package has made it an especially good fit for teaching
introductory statistics and data science (Baumer, Bray,
Ã‡etinkaya-Rundel, \& Hardin, 2020; Ã‡etinkaya-Rundel \& Ellison, 2021;
Ismay \& Kim, 2019) and research in data pedagogy (Fergusson \&
Pfannkuch, 2021; Loy, 2021). Further, the package has already seen usage
in a number of published scientific applications (Ask et al., 2021;
Fallon \& Hinds, 2021; McLean et al., 2021). Finally, the package
integrates with the greater tidymodels collection of packages, a
burgeoning software ecosystem for tidyverse-aligned predictive modeling
used across many modern research and industrial applications (Kuhn \&
Wickham, 2020). To date, the package has been downloaded more than
400,000 times.

\hypertarget{underlying-principles}{%
\section{Underlying Principles}\label{underlying-principles}}

Regardless of the hypothesis test in question, an analyst asks the same
kind of question when conducting statistical inference: is the
effect/difference in the observed data real, or due to random chance? To
answer this question, the analyst begins by assuming that the effect in
the observed data was simply due to random chance, and calls this
assumption the \emph{null hypothesis}. (In reality, they might not
believe in the null hypothesis at all---the null hypothesis is in
opposition to the \emph{alternate hypothesis}, which supposes that the
effect present in the observed data is actually due to the fact that
``something is going on.'') The analyst then calculates a \emph{test
statistic} from the data that describes the observed effect. They can
use this test statistic to calculate a \emph{p-value} via juxtaposition
with a \emph{null distribution}, giving the probability that the
observed data could come about if the null hypothesis were true. If this
probability is below some pre-defined \emph{significance level}
\(\alpha\), then the analyst can reject the null hypothesis.

The workflow of this package is designed around this idea. Starting out
with some dataset,

\begin{itemize}
\tightlist
\item
  \texttt{specify()} allows the analyst to specify the variable, or
  relationship between variables, that they are interested in.
\item
  \texttt{hypothesize()} allows the analyst to declare the null
  hypothesis.
\item
  \texttt{generate()} allows the analyst to generate data reflecting the
  null hypothesis or using the bootstrap.
\item
  \texttt{calculate()} allows the analyst to calculate summary
  statistics, either from

  \begin{itemize}
  \tightlist
  \item
    the observed data, to form the observed test statistic.
  \item
    data \texttt{generate()}d to reflect the null hypothesis, to form a
    randomization-based null distribution of test statistics.
  \end{itemize}
\end{itemize}

As such, the ultimate output of an infer pipeline using these four
functions is generally an \emph{observed statistic} or \emph{null
distribution} of test statistics. These four functions are thus
supplemented with several utilities to visualize and extract value from
their outputs.

\begin{itemize}
\tightlist
\item
  \texttt{visualize()} plots the null distribution of test statistics.

  \begin{itemize}
  \tightlist
  \item
    \texttt{shade\_p\_value()} situates the observed statistic in the
    null distribution, shading the region as or more extreme.
  \end{itemize}
\item
  \texttt{get\_p\_value()} calculates a p-value via the juxtaposition of
  the test statistic and the null distribution.
\end{itemize}

The workflow outlined above can also be used for constructing confidence
intervals via bootstrapping with the omission of the
\texttt{hypothesize()} step in the pipeline. The resulting bootstrap
distribution can then be visualized with \texttt{visualize()}, the
confidence interval region can be situated in the bootstrap distribution
with \texttt{shade\_confidence\_interval()}, and the bounds of the
confidence interval can be calculated with
\texttt{get\_confidence\_interval()}.

Beyond this, the \texttt{infer} package offers:

\begin{itemize}
\tightlist
\item
  methods for inference using theory-based distributions
\item
  shorthand wrappers for common statistical tests using tidy data
\item
  model-fitting workflows to accommodate multiple explanatory variables
\end{itemize}

\hypertarget{comparison-to-other-packages}{%
\section{Comparison to Other
Packages}\label{comparison-to-other-packages}}

Several software packages on the Comprehensive R Archive Network share
functionality with \texttt{infer} (R Core Team, 2021). \texttt{broom}
and \texttt{parameters} convert model objects to unified output formats,
though they do not provide methods for fitting models, describing null
distributions, performing bootstrapping, or calculating summary
statistics from tabular data (LÃ¼decke, Ben-Shachar, Patil, \& Makowski,
2020; Robinson, Hayes, \& Couch, 2021). \texttt{statsExpressions}, and
adjacent packages in the \texttt{easystats} ecosystem, implement
wrappers with consistent interfaces for theory-based hypothesis tests
(Patil, 2021). Similarly, \texttt{mosaic} is a package used to teach
statistics by unifying summary statistics, visualization, and modeling
with a consistent API built around R's formula interface. The
\texttt{mosaic} package also includes functionality to conduct
randomization-based inference (Pruim, Kaplan, \& Horton, 2017). At a
higher level, though, the structure of each of these packages is defined
by model types and statistics, where each model type or statistic has
its own associated function and/or object class. In contrast,
\texttt{infer} is structured around four functions, situating statistics
and model types within a more abstracted grammar.\footnote{This grammar
  follows from Allen Downey's ``there is only one test'' framework
  (Downey, 2016).}

\hypertarget{acknowledgements}{%
\section{Acknowledgements}\label{acknowledgements}}

We acknowledge contributions from Albert Y. Kim, Jo Hardin, Jay Lee,
Amelia McNamara, Nick Solomon, and Richie Cotton.

\hypertarget{references}{%
\section*{References}\label{references}}
\addcontentsline{toc}{section}{References}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\hypertarget{ref-ask2021per}{}%
Ask, A. V., Jenssen, B. M., Tartu, S., Angelier, F., Chastel, O., \&
Gabrielsen, G. W. (2021). Per-and polyfluoroalkyl substances are
positively associated with thyroid hormones in an arctic seabird.
\emph{Environmental Toxicology and Chemistry}, \emph{40}(3), 820--831.
doi:\href{https://doi.org/10.1002/etc.4978}{10.1002/etc.4978}

\leavevmode\hypertarget{ref-baumer2020teaching}{}%
Baumer, B. S., Bray, A. P., Ã‡etinkaya-Rundel, M., \& Hardin, J. S.
(2020). Teaching introductory statistics with DataCamp. \emph{Journal of
Statistics Education}, \emph{28}(1), 89--97.
doi:\href{https://doi.org/10.1080/10691898.2020.1730734}{10.1080/10691898.2020.1730734}

\leavevmode\hypertarget{ref-cetinkaya2021fresh}{}%
Ã‡etinkaya-Rundel, M., \& Ellison, V. (2021). A fresh look at
introductory data science. \emph{Journal of Statistics and Data Science
Education}, \emph{29}(sup1), S16--S26.
doi:\href{https://doi.org/10.1080/10691898.2020.1804497}{10.1080/10691898.2020.1804497}

\leavevmode\hypertarget{ref-downey2016}{}%
Downey, A. B. (2016). There is still only one test. Retrieved from
\url{http://allendowney.blogspot.com/2016/06/there-is-still-only-one-test.html}

\leavevmode\hypertarget{ref-fallon2021single}{}%
Fallon, M. E., \& Hinds, M. T. (2021). Single cell morphological metrics
and cytoskeletal alignment regulate VCAM-1 protein expression.
\emph{Biochemical and Biophysical Research Communications}, \emph{555},
160--167.
doi:\href{https://doi.org/10.1016/j.bbrc.2021.03.129}{10.1016/j.bbrc.2021.03.129}

\leavevmode\hypertarget{ref-fergusson2021introducing}{}%
Fergusson, A., \& Pfannkuch, M. (2021). Introducing teachers who use
GUI-driven tools for the randomization test to code-driven tools.
\emph{Mathematical Thinking and Learning}, 1--21.
doi:\href{https://doi.org/10.1080/10986065.2021.1922856}{10.1080/10986065.2021.1922856}

\leavevmode\hypertarget{ref-ismay2019statistical}{}%
Ismay, C., \& Kim, A. Y. (2019). \emph{Statistical inference via data
science: A ModernDive into {R} and the tidyverse}. CRC Press.
doi:\href{https://doi.org/10.1080/00224065.2020.1848366}{10.1080/00224065.2020.1848366}

\leavevmode\hypertarget{ref-kuhn2020tidymodels}{}%
Kuhn, M., \& Wickham, H. (2020). Tidymodels: A collection of packages
for modeling and machine learning using tidyverse principles.
\emph{Boston, MA, USA.} Retrieved from \url{https://tidymodels.org}

\leavevmode\hypertarget{ref-loy2021bringing}{}%
Loy, A. (2021). Bringing visual inference to the classroom.
\emph{Journal of Statistics and Data Science Education}, 1--12.
doi:\href{https://doi.org/10.1080/26939169.2021.1920866}{10.1080/26939169.2021.1920866}

\leavevmode\hypertarget{ref-r-parameters}{}%
LÃ¼decke, D., Ben-Shachar, M. S., Patil, I., \& Makowski, D. (2020).
Extracting, computing and exploring the parameters of statistical models
using {R}. \emph{Journal of Open Source Software}, \emph{5}(53), 2445.
doi:\href{https://doi.org/10.21105/joss.02445}{10.21105/joss.02445}

\leavevmode\hypertarget{ref-mclean2021controlled}{}%
McLean, Z. L., Appleby, S. J., Fermin, L. M., Henderson, H. V., Wei, J.,
Wells, D. N., \& Oback, B. (2021). Controlled cytoplast arrest and
morula aggregation enhance development, cryoresilience, and in vivo
survival of cloned sheep embryos. \emph{Cellular Reprogramming},
\emph{23}(1), 14--25.
doi:\href{https://doi.org/10.1089/cell.2020.0078}{10.1089/cell.2020.0078}

\leavevmode\hypertarget{ref-r-statsExpressions}{}%
Patil, I. (2021). {statsExpressions: {R} Package for Tidy Dataframes and
Expressions with Statistical Details}. \emph{{Journal of Open Source
Software}}, \emph{6}(61), 3236.
doi:\href{https://doi.org/10.21105/joss.03236}{10.21105/joss.03236}

\leavevmode\hypertarget{ref-r-mosaic}{}%
Pruim, R., Kaplan, D. T., \& Horton, N. J. (2017). The mosaic package:
Helping students to 'think with data' using r. \emph{The R Journal},
\emph{9}(1), 77--102. Retrieved from
\url{https://journal.r-project.org/archive/2017/RJ-2017-024/index.html}

\leavevmode\hypertarget{ref-CRAN}{}%
R Core Team. (2021). \emph{R: A language and environment for statistical
computing}. Vienna, Austria: R Foundation for Statistical Computing.
Retrieved from \url{https://www.R-project.org/}

\leavevmode\hypertarget{ref-r-broom}{}%
Robinson, D., Hayes, A., \& Couch, S. (2021). \emph{Broom: Convert
statistical objects into tidy tibbles}. Retrieved from
\url{https://CRAN.R-project.org/package=broom}

\leavevmode\hypertarget{ref-wickham2019welcome}{}%
Wickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L. D.,
FranÃ§ois, R., Grolemund, G., et al. (2019). Welcome to the tidyverse.
\emph{Journal of Open Source Software}, \emph{4}(43), 1686.
doi:\href{https://doi.org/10.21105/joss.01686}{10.21105/joss.01686}

\end{CSLReferences}

\end{document}
